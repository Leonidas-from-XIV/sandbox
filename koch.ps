%!PS-Adobe-3.0
%%Title: (Koch snowflake)
%%Creator: (Marek Kubica <marek@xivilization.net>)
%%EndComments

% (order len) -- (order len)
/drawthird { %def
	2 copy

	% get a copy of order on top
	1 index
	% compare that to zero
	0 eq
	{ %ifelse: true
		% duplicate len
		0 rlineto
		% delete order
		pop
	}
	{ %ifelse: false
		% divide len/3, decrement order
		3 div
		exch
		1 sub
		exch

		drawthird
		60 rotate
		drawthird
		240 rotate
		drawthird
		60 rotate
		drawthird

		pop pop
	} ifelse

} def

% (order len) -- ()
/drawtriangle {
	% decrement order
	exch 1 sub exch

	60 rotate
	drawthird
	240 rotate
	drawthird
	240 rotate
	drawthird

	pop pop
} def

200 300 translate
0 0 moveto
3 300 drawtriangle
stroke
